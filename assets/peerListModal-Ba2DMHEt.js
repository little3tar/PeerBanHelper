import{B as z,j as O,f as U,b as m,I as q,c as E,d as J,_ as K}from"./index-eP8ef9kL.js";import{_ as R}from"./queryIpLink.vue_vue_type_script_setup_true_lang-DlxahBco.js";import{f as G,a6 as H,r as g,a8 as Q,j as _,s as h,t as e,v as p,x as l,a2 as o,y as a,u as N,p as W,k,F as X,P as Y}from"./libs-JpPrnt1f.js";import{T as Z,S as ee,K as ae,c as te,t as se,J as oe}from"./arcoDesign-CRPk19aq.js";const le=G({__name:"peerListModal",setup(ne,{expose:P}){const{t:n}=H(),f=g(!1),w=g(""),v=g(""),b=g("");P({showModal:(i,s,r)=>{w.value=i,v.value=s,b.value=r,f.value=!0,T(i,s)}});const D=()=>{f.value=!1,w.value="",v.value=""},{data:y,loading:S,run:T,cancel:A}=Q(z,{defaultParams:[w.value,v.value],manual:!0,pollingInterval:1e3}),B=[{title:()=>n("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:320},{title:()=>n("page.dashboard.peerList.column.flag"),slotName:"flags",width:110},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>n("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:300},{title:()=>n("page.dashboard.peerList.column.speed"),slotName:"speed",width:140},{title:()=>n("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:140},{title:()=>n("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],C=i=>i.split(" ").map(s=>s+" - "+n("page.dashboard.peerList.column.flags."+s.trim()));return(i,s)=>{const r=Z,d=ee,x=q,I=E,F=ae,j=J,M=te,V=se,$=oe;return _(),h($,{visible:f.value,"onUpdate:visible":s[0]||(s[0]=c=>f.value=c),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:D,onClose:s[1]||(s[1]=c=>o(A)())},{title:e(()=>[p(l(o(n)("page.dashboard.peerList.title")+b.value),1)]),default:e(()=>{var c;return[a(V,{columns:B,data:(c=o(y))==null?void 0:c.data,loading:!o(S)&&!o(y),style:{width:"1600px"},"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(d,{wrap:!1},{default:e(()=>{var u,L;return[(L=(u=t.geo)==null?void 0:u.country)!=null&&L.iso?(_(),h(O,{key:0,iso:t.geo.country.iso},null,8,["iso"])):N("",!0),a(r,{copyable:"",code:"",style:{"white-space":"nowrap"}},{default:e(()=>[a(R,{ip:t.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:e(()=>[p(l(o(U)(t.peer.address.ip,t.peer.address.port)),1)]),_:2},1032,["ip"])]),_:2},1024)]}),_:2},1024)]),speed:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(x,{class:"green"}),p(" "+l(o(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(I,{class:"red"}),p(" "+l(o(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(x,{class:"green"}),p(" "+l(o(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(I,{class:"red"}),p(" "+l(o(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(d,null,{default:e(()=>[a(F,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[p(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[W("p",null,[p(l(t.peer.flags)+" ",1),t.peer.flags?(_(),h(M,{key:0},{content:e(()=>[(_(!0),k(X,null,Y(C(t.peer.flags),u=>(_(),k("p",{key:u},l(u),1))),128))]),default:e(()=>[a(j)]),_:2},1024)):N("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),ce=K(le,[["__scopeId","data-v-09e7f941"]]);export{ce as default};
